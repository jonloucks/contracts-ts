<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: BasicContract.ts</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: BasicContract.ts</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { OptionalType, RequiredType } from "./Types";
import { ClassCastException } from "./ClassCastException";
import { Contract, Config } from "./Contract";

/**
 * Create a basic Contract
 * 
 * @param config the configuration for the Contract
 * @returns the created Contract
 */
export function create&lt;T>(config?: Config&lt;T> | null) : RequiredType&lt;Contract&lt;T>> {
    return BasicContract.create&lt;T>(config);
}

/**
 * Check if the given instance is a BasicContract
 * It does not enforce duck-typing checks, it is the
 * responsibility of the caller to ensure the instance is really the
 * correct deliverable type.
 */
export class BasicContract&lt;T> implements Contract&lt;T> {

    /**
      * Create a contract derived from the given configuration
      *
      * @param config the name for the contract, null is not allowed
      * @param &lt;T>    the type of deliverable for this Contract
      * @return the new Contract
      */
    static create&lt;T>(config?: Config&lt;T> | null): Contract&lt;T> {
        return new BasicContract&lt;T>(config);
    }

    /**
    * Casts the given object to the return type for this Contract
    * This is used to make sure the value is a checked value and does not sneak passed during erasure
    *
    * @param value the value to cast
    * @return the checked value. Note: null is possible. The Promisor is allowed to return null
    * @throws ClassCastException iif the value can't be cast to the return type.
    */
    public cast(value: unknown | null | undefined): OptionalType&lt;T> {
        if (this._tester(value)) {
            return this._caster(value) as OptionalType&lt;T>;
        } else {
            throw new ClassCastException(`${this.toString()} cast failed.`);
        }
    }

    /**
     * @return the contract name
     */
    public get name(): string {
        return this._name;
    }

    /**
     * Note: Do not rely on this being a java class name
     * Note: The actual class is never exposed and is by design.
     *
     * @return the type of deliverable for this contract.
     */
    public get typeName(): string {
        return this._typeName;
    }

    /**
     * When replaceable a new binding can replace in an existing one
     * The default is false
     *
     * @return true if replaceable
     */
    public get replaceable(): boolean {
        return this._replaceable;
    }

    /**
     * String representation of this Contract
     * Note: not intended to be parsed or relied on.
     * @returns a string representation of the contract
     */
    public toString(): string {
        return `Contract(id=${this._id}, name=${this.name}, type=${this.typeName})`;
    }

    public constructor(config?: Config&lt;T> | null) {
        const candidateConfig: Config&lt;T> = config ?? {};
        this._replaceable = candidateConfig?.replaceable ?? false;
        this._name = candidateConfig?.name ?? "";
        this._typeName = candidateConfig?.typeName ?? "";
        this._tester = candidateConfig?.test ?? ((instance: unknown): instance is OptionalType&lt;T> => true);
        this._caster = candidateConfig?.cast ?? ((instance: unknown) => instance);
    }

    private static ID_GENERATOR: number = 1;

    private readonly _id: number = BasicContract.ID_GENERATOR++;
    private readonly _name: string;
    private readonly _typeName: string;
    private readonly _tester: (instance: unknown) => instance is OptionalType&lt;T>;
    private readonly _caster: (instance: unknown) => unknown;
    private readonly _replaceable: boolean;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BasicContract.html">BasicContract</a></li><li><a href="ClassCastException.html">ClassCastException</a></li><li><a href="ContractException.html">ContractException</a></li><li><a href="IllegalArgumentException.html">IllegalArgumentException</a></li><li><a href="IllegalStateException.html">IllegalStateException</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AUTO_CLOSE_NONE">AUTO_CLOSE_NONE</a></li><li><a href="global.html#CONTRACT">CONTRACT</a></li><li><a href="global.html#DEFAULT_BIND_STRATEGY">DEFAULT_BIND_STRATEGY</a></li><li><a href="global.html#LAWYER">LAWYER</a></li><li><a href="global.html#builderCheck">builderCheck</a></li><li><a href="global.html#builderConsumerCheck">builderConsumerCheck</a></li><li><a href="global.html#configCheck">configCheck</a></li><li><a href="global.html#contractCheck">contractCheck</a></li><li><a href="global.html#contractsCheck">contractsCheck</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#createContract">createContract</a></li><li><a href="global.html#hasFunctions">hasFunctions</a></li><li><a href="global.html#hasRequiredFunctions">hasRequiredFunctions</a></li><li><a href="global.html#inlineAutoClose">inlineAutoClose</a></li><li><a href="global.html#isAutoClose">isAutoClose</a></li><li><a href="global.html#isAutoOpen">isAutoOpen</a></li><li><a href="global.html#isDeliverable">isDeliverable</a></li><li><a href="global.html#isNotNullOrUndefined">isNotNullOrUndefined</a></li><li><a href="global.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="global.html#messageCheck">messageCheck</a></li><li><a href="global.html#nameCheck">nameCheck</a></li><li><a href="global.html#nullCheck">nullCheck</a></li><li><a href="global.html#promisorCheck">promisorCheck</a></li><li><a href="global.html#typeCheck">typeCheck</a></li><li><a href="global.html#validateContracts">validateContracts</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Jan 08 2026 22:31:18 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
